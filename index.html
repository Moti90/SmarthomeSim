<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smarthome Simulator</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè†</text></svg>">
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Firebase SDK v8 (Compatible with GitHub Pages) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-functions.js"></script>
</head>
<body>
    <!-- Login Container -->
    <div id="login-container" class="container">
        <div class="login-card">
            <div class="logo">
                <img src="LOGO.png" alt="Smarthome Logo" class="logo-image">
            </div>
            
            <form id="login-form" class="auth-form">
                <div class="input-group">
                    <input type="email" id="email" placeholder="Email" required>
                </div>
                <div class="input-group">
                            <input type="password" id="password" placeholder="Adgangskode" autocomplete="current-password" required>
                </div>
                <button type="submit" class="btn btn-primary">Log Ind</button>
            </form>
            
            <div class="auth-links">
                <a href="#" id="register-link">Opret konto</a>
                <a href="#" id="forgot-link">Glemt adgangskode?</a>
            </div>
        </div>
    </div>

    <!-- Register Container -->
    <div id="register-container" class="container hidden">
        <div class="register-card">
            <div class="logo">
                <img src="LOGO.png" alt="Smarthome Logo" class="logo-image">
                <p>Opret Konto</p>
            </div>
            
            <form id="register-form" class="auth-form">
                <div class="input-group">
                    <input type="email" id="register-email" placeholder="Email" required>
                </div>
                <div class="input-group">
                            <input type="password" id="register-password" placeholder="Adgangskode" autocomplete="new-password" required>
                </div>
                <button type="submit" class="btn btn-primary">Opret Konto</button>
            </form>
            
            <div class="auth-links">
                <a href="#" id="login-back-link">Tilbage til login</a>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app-container" class="container hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="logo-small">
                        <img src="LOGO.png" alt="Logo" class="logo-icon">
                        <span class="app-title">Smarthome Simulator</span>
                    </div>
                </div>
                
                <nav class="header-nav">
                    <button class="nav-btn active" data-tab="home">
                        <span class="nav-icon">‚åÇ</span>
                        <span class="nav-label">Forside</span>
                    </button>
                    <button class="nav-btn" data-tab="elearning">
                        <span class="nav-icon">‚óä</span>
                        <span class="nav-label">E-Learning</span>
                    </button>
                    <button class="nav-btn advanced-tab" data-tab="advanced">
                        <span class="nav-icon">‚òÜ</span>
                        <span class="nav-label">Advanced</span>
                    </button>
                    <button class="nav-btn" data-tab="smarthome">
                        <span class="nav-icon">‚ñ∂</span>
                        <span class="nav-label">Smarthome Sim</span>
                    </button>
                    <button class="nav-btn" data-tab="settings">
                        <span class="nav-icon">‚öô</span>
                        <span class="nav-label">Indstillinger</span>
                    </button>
                </nav>
                
                <div class="header-right">
                    <span id="user-info" class="user-info">rasmusjakobsen1990@gmail.com</span>
                    <button id="logout-btn" class="logout-btn">Log Ud</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Forside Tab -->
            <div id="home-tab" class="tab-content active">
                <div class="content-section">
                    <div class="welcome-section">
                        <h1>Velkommen til Smarthome Simulator</h1>
                        <p class="subtitle">Din intelligente hjemmestyring starter her</p>
                    </div>
                    
                    <div class="video-section">
                        <div class="video-container">
                            <video 
                                id="intro-video" 
                                class="intro-video" 
                                controls 
                                preload="metadata"
                                aria-label="Smarthome Simulator Introduktionsvideo">
                                <source src="Introvideo.mp4" type="video/mp4">
                                <p>Din browser underst√∏tter ikke video elementet. <a href="Introvideo.mp4">Download videoen her</a>.</p>
                            </video>
                        </div>
                    </div>
                </div>
            </div>

            <!-- E-Learning Tab -->
            <div id="elearning-tab" class="tab-content">
                <div class="elearning-container">
                    <!-- Header Section -->
                    <div class="elearning-header">
                        <div class="header-content">
                            <h1>Smarthome Teknologi</h1>
                        </div>
                        <div class="header-stats">
                            <div class="stat-card">
                                <div class="stat-icon">üì°</div>
                                <div class="stat-info">
                                    <span class="stat-number">10+</span>
                                    <span class="stat-label">Sensortyper</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üß†</div>
                                <div class="stat-info">
                                    <span class="stat-number">74+</span>
                                    <span class="stat-label">Quiz Sp√∏rgsm√•l</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üèÜ</div>
                                <div class="stat-info">
                                    <span class="stat-number">0%</span>
                                    <span class="stat-label">Samlet Fremgang</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Learning Interface -->
                    <div class="learning-interface">
                        <!-- Topic Selection Panel -->
                        <div class="topic-panel">
                            <div class="panel-header">
                                <h2>V√¶lg Emne</h2>
                                <div class="header-controls">
                                    <div class="search-box">
                                        <input type="text" id="topic-search" placeholder="S√∏g emner...">
                                        <span class="search-icon">üîç</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="topics-grid">
                                <!-- Sensoere Topic -->
                                <div class="topic-card" data-topic="sensoere">
                                    <div class="topic-icon">üì°</div>
                                    <div class="topic-info">
                                        <h3>Sensoere</h3>
                                        <p>L√¶r om forskellige typer sensoere og deres anvendelse</p>
                                        <div class="topic-stats">
                                            <span class="subtopic-count">10 underemner</span>
                                            <span class="completion-rate">0% gennemf√∏rt</span>
                                        </div>
                                    </div>
                                    <div class="topic-arrow">‚Üí</div>
                                </div>

                                <!-- Forbindelsestyper Topic -->
                                <div class="topic-card" data-topic="forbindelser">
                                    <div class="topic-icon">üîó</div>
                                    <div class="topic-info">
                                        <h3>Forbindelsestyper</h3>
                                        <p>Forst√• forskellige kommunikationsprotokoller og netv√¶rk</p>
                                        <div class="topic-stats">
                                            <span class="subtopic-count">8 underemner</span>
                                            <span class="completion-rate">0% gennemf√∏rt</span>
                                        </div>
                                    </div>
                                    <div class="topic-arrow">‚Üí</div>
                                </div>

                                <!-- Automatisering Topic -->
                                <div class="topic-card" data-topic="automatisering">
                                    <div class="topic-icon">‚ö°</div>
                                    <div class="topic-info">
                                        <h3>Automatisering</h3>
                                        <p>Opret intelligente automatiseringer og scenarier</p>
                                        <div class="topic-stats">
                                            <span class="subtopic-count">6 underemner</span>
                                            <span class="completion-rate">0% gennemf√∏rt</span>
                                        </div>
                                    </div>
                                    <div class="topic-arrow">‚Üí</div>
                                </div>

                                <!-- Block Editor Topic -->
                                <div class="topic-card" data-topic="block-editor">
                                    <div class="topic-icon">üß©</div>
                                    <div class="topic-info">
                                        <h3>Block Editor</h3>
                                        <p>Tr√¶k og slip blokke for at bygge smarthome scener</p>
                                        <div class="topic-stats">
                                            <span class="subtopic-count">Interaktiv editor</span>
                                            <span class="completion-rate">Ny funktion</span>
                                        </div>
                                    </div>
                                    <div class="topic-arrow">‚Üí</div>
                                </div>

                                <!-- Sikkerhed Topic -->
                                <div class="topic-card" data-topic="sikkerhed">
                                    <div class="topic-icon">üîí</div>
                                    <div class="topic-info">
                                        <h3>Sikkerhed & Privatliv</h3>
                                        <p>Beskyt dit smarthome mod trusler og sikkerhedsrisici</p>
                                        <div class="topic-stats">
                                            <span class="subtopic-count">4 underemner</span>
                                            <span class="completion-rate">0% gennemf√∏rt</span>
                                        </div>
                                    </div>
                                    <div class="topic-arrow">‚Üí</div>
                                </div>

                                <!-- Energistyring Topic -->
                                <div class="topic-card" data-topic="energi">
                                    <div class="topic-icon">üå±</div>
                                    <div class="topic-info">
                                        <h3>Energistyring</h3>
                                        <p>Optim√©r energiforbrug og b√¶redygtige l√∏sninger</p>
                                        <div class="topic-stats">
                                            <span class="subtopic-count">5 underemner</span>
                                            <span class="completion-rate">0% gennemf√∏rt</span>
                                        </div>
                                    </div>
                                    <div class="topic-arrow">‚Üí</div>
                                </div>

                                <!-- Fejlfinding Topic -->
                                <div class="topic-card" data-topic="fejlfinding">
                                    <div class="topic-icon">üîß</div>
                                    <div class="topic-info">
                                        <h3>Fejlfinding</h3>
                                        <p>L√¶r at diagnosticere og l√∏se almindelige problemer</p>
                                        <div class="topic-stats">
                                            <span class="subtopic-count">4 underemner</span>
                                            <span class="completion-rate">0% gennemf√∏rt</span>
                                        </div>
                                    </div>
                                    <div class="topic-arrow">‚Üí</div>
                                </div>
                            </div>
                        </div>

                        <!-- Content Panel -->
                        <div class="content-panel">
                            <div class="content-header">
                                <button class="back-btn" id="back-to-topics" style="display: none;">
                                    <span>‚Üê</span> Tilbage til emner
                                </button>
                                <div class="current-topic-info">
                                    <h2 id="current-topic-title">V√¶lg et emne for at begynde</h2>
                                    <p id="current-topic-description">Klik p√• et emne til venstre for at se underemner og begynde l√¶ring</p>
                                </div>
                            </div>

                            <div class="content-body">
                                <!-- Default State -->
                                <div class="welcome-content" id="welcome-content">
                                    <div class="welcome-illustration">
                                        <div class="floating-icons">
                                            <div class="floating-icon" style="--delay: 0s">üì°</div>
                                            <div class="floating-icon" style="--delay: 1s">üîó</div>
                                            <div class="floating-icon" style="--delay: 2s">‚ö°</div>
                                            <div class="floating-icon" style="--delay: 3s">üîí</div>
                                        </div>
                                    </div>
                                    <h3>Velkommen til Smarthome E-Learning!</h3>
                                    <p>Udforsk vores omfattende l√¶ringsmoduler og byg din ekspertise op trin for trin. Hvert emne indeholder detaljerede underemner med interaktive √∏velser og praktiske eksempler.</p>
                                    <div class="quick-stats">
                                        <div class="stat-item">
                                            <span class="stat-number">6</span>
                                            <span class="stat-label">Hovedemner</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-number">37</span>
                                            <span class="stat-label">Underemner</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-number">74+</span>
                                            <span class="stat-label">Quiz Sp√∏rgsm√•l</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Subtopic Content -->
                                <div class="subtopics-container" id="subtopics-container" style="display: none;">
                                    <div class="subtopics-grid" id="subtopics-grid">
                                        <!-- Dynamic content will be inserted here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Achievement Panel -->
                    <div class="achievement-panel">
                        <div class="achievement-header">
                            <h3>üèÜ Pr√¶stationer</h3>
                        </div>
                        <div class="achievements-grid">
                            <div class="achievement-badge locked">
                                <div class="badge-icon">ü•á</div>
                                <span>F√∏rste Skridt</span>
                            </div>
                            <div class="achievement-badge locked">
                                <div class="badge-icon">üìö</div>
                                <span>L√¶relyst</span>
                            </div>
                            <div class="achievement-badge locked">
                                <div class="badge-icon">üéØ</div>
                                <span>M√•lrettet</span>
                            </div>
                            <div class="achievement-badge locked">
                                <div class="badge-icon">üíé</div>
                                <span>Ekspert</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Smarthome Sim Tab -->
            <div id="smarthome-tab" class="tab-content">
                <div class="simulator-layout">
                    <div class="floor-plan-section">
                        <div class="floor-plan-container">
                            <img src="plantegning.png" alt="Plantegning" class="floor-plan-image">
                            
                            <!-- Draggable Smart Home Icons -->
                            <div class="smart-icons-container">
                                <!-- Stue Lampe -->
                                <div class="smart-icon" data-device="stue-lampe" data-type="boolean" data-value="false" data-default-left="25" data-default-top="35" data-device-name="Stue Lampe" style="left: 25%; top: 35%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üí°</span>
                                    </div>
                                </div>
                                
                                <!-- Stue Smart Stikkontakt -->
                                <div class="smart-icon" data-device="stue-stikkontakt" data-type="boolean" data-value="false" data-default-left="15" data-default-top="15" data-device-name="Stue Stikkontakt" style="left: 15%; top: 15%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">‚ö°</span>
                                    </div>
                                </div>
                                
                                <!-- Badev√¶relses Lampe -->
                                <div class="smart-icon" data-device="badevaerelse-lampe" data-type="boolean" data-value="false" data-default-left="20" data-default-top="65" data-device-name="Badev√¶relses Lampe" style="left: 20%; top: 65%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üí°</span>
                                    </div>
                                </div>
                                
                                <!-- Sovev√¶relse Lampe -->
                                <div class="smart-icon" data-device="sovevaerelse-lampe" data-type="boolean" data-value="false" data-default-left="75" data-default-top="25" data-device-name="Sovev√¶relse Lampe" style="left: 75%; top: 25%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üí°</span>
                                    </div>
                                </div>
                                
                                <!-- Sovev√¶relse Temperatursensor -->
                                <div class="smart-icon" data-device="sovevaerelse-temperatur" data-type="numeric" data-value="21" data-default-left="25" data-default-top="25" data-device-name="Sovev√¶relse Temperatur" style="left: 25%; top: 25%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üå°Ô∏è</span>
                                    </div>
                                </div>
                                
                                <!-- Sovev√¶relse Smart Stikkontakt -->
                                <div class="smart-icon" data-device="sovevaerelse-stikkontakt" data-type="boolean" data-value="false" data-default-left="50" data-default-top="25" data-device-name="Sovev√¶relse Stikkontakt" style="left: 50%; top: 25%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">‚ö°</span>
                                    </div>
                                </div>
                                
                                <!-- K√∏kken Lampe -->
                                <div class="smart-icon" data-device="koekken-lampe" data-type="boolean" data-value="false" data-default-left="35" data-default-top="75" data-device-name="K√∏kken Lampe" style="left: 35%; top: 75%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üí°</span>
                                    </div>
                                </div>
                                
                                <!-- K√∏kken R√∏galarm -->
                                <div class="smart-icon" data-device="koekken-roegalarm" data-type="boolean" data-value="false" data-default-left="15" data-default-top="25" data-device-name="K√∏kken R√∏galarm" style="left: 15%; top: 25%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üö®</span>
                                    </div>
                                </div>
                                
                                <!-- K√∏kken Vandl√¶kagesensor -->
                                <div class="smart-icon" data-device="koekken-vandlaekage" data-type="boolean" data-value="false" data-default-left="25" data-default-top="25" data-device-name="K√∏kken Vandl√¶kage" style="left: 25%; top: 25%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üíß</span>
                                    </div>
                                </div>
                                
                                <!-- K√∏kken Smart Stikkontakt -->
                                <div class="smart-icon" data-device="koekken-stikkontakt" data-type="boolean" data-value="false" data-default-left="35" data-default-top="25" data-device-name="K√∏kken Stikkontakt" style="left: 35%; top: 25%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">‚ö°</span>
                                    </div>
                                </div>
                                
                                <!-- Spisestue Lampe -->
                                <div class="smart-icon" data-device="spisestue-lampe" data-type="boolean" data-value="false" data-default-left="55" data-default-top="55" data-device-name="Spisestue Lampe" style="left: 55%; top: 55%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üí°</span>
                                    </div>
                                </div>
                                
                                <!-- Vindue Sovev√¶relse -->
                                <div class="smart-icon" data-device="vindue-sovevaerelse" data-type="boolean" data-value="false" data-default-left="15" data-default-top="40" data-device-name="Vindue Sovev√¶relse" style="left: 15%; top: 40%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">ü™ü</span>
                                    </div>
                                </div>
                                
                                <!-- Vindue Stue -->
                                <div class="smart-icon" data-device="vindue-stue" data-type="boolean" data-value="false" data-default-left="85" data-default-top="40" data-device-name="Vindue Stue" style="left: 85%; top: 40%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">ü™ü</span>
                                    </div>
                                </div>
                                
                                <!-- D√∏rl√•s -->
                                <div class="smart-icon" data-device="doerlaas" data-type="boolean" data-value="false" data-default-left="50" data-default-top="15" data-device-name="D√∏rl√•s" style="left: 50%; top: 15%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üîí</span>
                                    </div>
                                </div>
                                
                                <!-- Bev√¶gelsessensor Entre -->
                                <div class="smart-icon" data-device="bevaegelsessensor-entre" data-type="boolean" data-value="false" data-default-left="45" data-default-top="30" data-device-name="Bev√¶gelsessensor Entre" style="left: 45%; top: 30%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üì°</span>
                                    </div>
                                </div>
                                
                                <!-- Bev√¶gelsessensor Stue -->
                                <div class="smart-icon" data-device="bevaegelsessensor-stue" data-type="boolean" data-value="false" data-default-left="30" data-default-top="45" data-device-name="Bev√¶gelsessensor Stue" style="left: 30%; top: 45%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üì°</span>
                                    </div>
                                </div>
                                
                                <!-- Aktuator/Radiator -->
                                <div class="smart-icon" data-device="aktuator-radiator" data-type="boolean" data-value="false" data-default-left="60" data-default-top="40" data-device-name="Aktuator/Radiator" style="left: 60%; top: 40%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üå°Ô∏è</span>
                                    </div>
                                </div>
                                
                                <!-- Udvendig Vejrstation -->
                                <div class="smart-icon" data-device="udvendig-vejrstation" data-type="boolean" data-value="false" data-default-left="10" data-default-top="10" data-device-name="Udvendig Vejrstation" style="left: 10%; top: 10%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üå§Ô∏è</span>
                                    </div>
                                </div>
                                
                                <!-- Badev√¶relse Ventilator -->
                                <div class="smart-icon" data-device="badevaerelse-ventilator" data-type="boolean" data-value="false" data-default-left="25" data-default-top="25" data-device-name="Badev√¶relse Ventilator" style="left: 25%; top: 25%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üåÄ</span>
                                    </div>
                                </div>
                                
                                <!-- Badev√¶relse Fugtm√•ler -->
                                <div class="smart-icon" data-device="badevaerelse-fugtmaaler" data-type="numeric" data-value="45" data-default-left="30" data-default-top="20" data-device-name="Badev√¶relse Fugtm√•ler" style="left: 30%; top: 20%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üíß</span>
                                    </div>
                                </div>
                                
                                <!-- Altanlys -->
                                <div class="smart-icon" data-device="altan-lys" data-type="boolean" data-value="false" data-default-left="10" data-default-top="10" data-device-name="Altanlys" style="left: 10%; top: 10%;">
                                    <div class="icon-content">
                                        <span class="icon-symbol">üí°</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                <div class="control-section">
                    <div class="control-panel">
                        <h3>Kontrolpanel</h3>
                        
                        <!-- Weather Indicator -->
                        <div class="weather-indicator">
                            <div class="weather-item">
                                <span class="weather-icon">üå°Ô∏è</span>
                                <span class="weather-value" id="outdoor-temp">15¬∞C</span>
                            </div>
                            <div class="weather-item">
                                <span class="weather-icon">‚òÄÔ∏è</span>
                                <span class="weather-value" id="outdoor-light">M√∏rkt</span>
                            </div>
                        </div>
                        
                        <!-- Scenarie Kontrol -->
                        <div class="scenario-controls">
                            <h4>Scenarier</h4>
                            <div class="scenario-grid">
                                <button class="scenario-btn" data-scenario="morning">
                                    <span class="scenario-icon">üåÖ</span>
                                    <span class="scenario-name">Morgen</span>
                                </button>
                                <button class="scenario-btn" data-scenario="night">
                                    <span class="scenario-icon">üåô</span>
                                    <span class="scenario-name">Nat</span>
                                </button>
                                <button class="scenario-btn" data-scenario="coming-home">
                                    <span class="scenario-icon">üè†</span>
                                    <span class="scenario-name">Kommer Hjem</span>
                                </button>
                                <button class="scenario-btn" data-scenario="leaving-home">
                                    <span class="scenario-icon">üö™</span>
                                    <span class="scenario-name">Forlader Hjemmet</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Block Editor Kontrol -->
                        <div class="scenario-controls">
                            <button class="scenario-btn" onclick="window.appManager.openBlockEditor()">
                                <span class="scenario-icon">üß©</span>
                                <span class="scenario-name">Regler </span>
                            </button>
                        </div>
                        
                        <div class="device-controls">
                                <div class="control-group">
                                    <h4>Lys</h4>
                                    
                                    <!-- Stue Lampe -->
                                    <div class="control-item">
                                        <label for="stue-lampe-switch">Stue Lampe</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="stue-lampe-switch" class="lamp-switch" data-device="stue-lampe">
                                            <label for="stue-lampe-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                    <!-- Badev√¶relses Lampe -->
                                    <div class="control-item">
                                        <label for="badevaerelse-lampe-switch">Badev√¶relses Lampe</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="badevaerelse-lampe-switch" class="lamp-switch" data-device="badevaerelse-lampe">
                                            <label for="badevaerelse-lampe-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                    <!-- Sovev√¶relse Lampe -->
                                    <div class="control-item">
                                        <label for="sovevaerelse-lampe-switch">Sovev√¶relse Lampe</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="sovevaerelse-lampe-switch" class="lamp-switch" data-device="sovevaerelse-lampe">
                                            <label for="sovevaerelse-lampe-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                    <!-- K√∏kken Lampe -->
                                    <div class="control-item">
                                        <label for="koekken-lampe-switch">K√∏kken Lampe</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="koekken-lampe-switch" class="lamp-switch" data-device="koekken-lampe">
                                            <label for="koekken-lampe-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                    <!-- Spisestue Lampe -->
                                    <div class="control-item">
                                        <label for="spisestue-lampe-switch">Spisestue Lampe</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="spisestue-lampe-switch" class="lamp-switch" data-device="spisestue-lampe">
                                            <label for="spisestue-lampe-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                    <!-- Altanlys -->
                                    <div class="control-item">
                                        <label for="altan-lys-switch">Altanlys</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="altan-lys-switch" class="lamp-switch" data-device="altan-lys">
                                            <label for="altan-lys-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                </div>
                                
                                
                                <div class="control-group">
                                    <h4>Sensorer</h4>
                                    
                                    <!-- Bev√¶gelsessensor Entre -->
                                    <div class="control-item">
                                        <label for="bevaegelsessensor-entre-switch">Bev√¶gelsessensor Entre</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="bevaegelsessensor-entre-switch" class="lamp-switch" data-device="bevaegelsessensor-entre">
                                            <label for="bevaegelsessensor-entre-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                    <!-- Bev√¶gelsessensor Stue -->
                                    <div class="control-item">
                                        <label for="bevaegelsessensor-stue-switch">Bev√¶gelsessensor Stue</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="bevaegelsessensor-stue-switch" class="lamp-switch" data-device="bevaegelsessensor-stue">
                                            <label for="bevaegelsessensor-stue-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                    <!-- Alarmsystem -->
                                    <div class="control-item">
                                        <label for="alarmsystem-switch">Alarmsystem</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="alarmsystem-switch" class="lamp-switch" data-device="alarmsystem">
                                            <label for="alarmsystem-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="control-group">
                                    <h4>Klima & Milj√∏</h4>
                                    
                                    <!-- Aktuator/Radiator -->
                                    <div class="control-item">
                                        <label for="aktuator-radiator-switch">Aktuator/Radiator</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="aktuator-radiator-switch" class="lamp-switch" data-device="aktuator-radiator">
                                            <label for="aktuator-radiator-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    <div class="control-item">
                                        <label for="radiator-temp-display">Temperatur</label>
                                        <div class="temp-display">
                                            <span id="radiator-temp-display">21.0¬∞C</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Badev√¶relse Ventilator -->
                                    <div class="control-item">
                                        <label for="badevaerelse-ventilator-switch">Badev√¶relse Ventilator</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="badevaerelse-ventilator-switch" class="lamp-switch" data-device="badevaerelse-ventilator">
                                            <label for="badevaerelse-ventilator-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                    <!-- Sovev√¶relse Temperatursensor -->
                                    <div class="control-item">
                                        <label for="sovevaerelse-temperatur-btn">Sovev√¶relse Temperatur</label>
                                        <div class="temp-control-container">
                                            <span id="sovevaerelse-temperatur-display" class="temp-display">21¬∞C</span>
                                            <button id="sovevaerelse-temperatur-btn" class="temp-control-btn" data-device="sovevaerelse-temperatur">
                                                <span class="btn-icon">üå°Ô∏è</span>
                                                <span class="btn-text">Indstil</span>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- K√∏kken R√∏galarm -->
                                    <div class="control-item">
                                        <label for="koekken-roegalarm-switch">K√∏kken R√∏galarm</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="koekken-roegalarm-switch" class="lamp-switch" data-device="koekken-roegalarm">
                                            <label for="koekken-roegalarm-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                    <!-- K√∏kken Vandl√¶kagesensor -->
                                    <div class="control-item">
                                        <label for="koekken-vandlaekage-switch">K√∏kken Vandl√¶kage</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="koekken-vandlaekage-switch" class="lamp-switch" data-device="koekken-vandlaekage">
                                            <label for="koekken-vandlaekage-switch" class="switch-label"></label>
                                        </div>
                                    </div>
                                    
                                </div>
                                
                                <div class="control-group">
                                    <h4>Smart Stikkontakter</h4>
                                    
                                    <!-- Stue Stikkontakt -->
                                    <div class="control-item">
                                        <label for="stue-stikkontakt-switch">Stue Stikkontakt</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="stue-stikkontakt-switch" class="lamp-switch" data-device="stue-stikkontakt">
                                            <label for="stue-stikkontakt-switch" class="switch-label"></label>
                                        </div>
                                        <div class="power-consumption" id="stue-stikkontakt-power">0W</div>
                                    </div>
                                    
                                    <!-- K√∏kken Stikkontakt -->
                                    <div class="control-item">
                                        <label for="koekken-stikkontakt-switch">K√∏kken Stikkontakt</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="koekken-stikkontakt-switch" class="lamp-switch" data-device="koekken-stikkontakt">
                                            <label for="koekken-stikkontakt-switch" class="switch-label"></label>
                                        </div>
                                        <div class="power-consumption" id="koekken-stikkontakt-power">0W</div>
                                    </div>
                                    
                                    <!-- Sovev√¶relse Stikkontakt -->
                                    <div class="control-item">
                                        <label for="sovevaerelse-stikkontakt-switch">Sovev√¶relse Stikkontakt</label>
                                        <div class="switch-container">
                                            <input type="checkbox" id="sovevaerelse-stikkontakt-switch" class="lamp-switch" data-device="sovevaerelse-stikkontakt">
                                            <label for="sovevaerelse-stikkontakt-switch" class="switch-label"></label>
                                        </div>
                                        <div class="power-consumption" id="sovevaerelse-stikkontakt-power">0W</div>
                                    </div>
                                    
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Block Editor Side (skjult som standard) -->
            <div id="block-editor-side" class="block-editor-container hidden">
                <div class="block-editor-header">
                    <button class="back-btn" onclick="window.appManager.closeBlockEditor()">
                        <span>‚Üê</span> Tilbage til Simulator
                    </button>
                    <h2>üß© Block Editor</h2>
                    <p>Tr√¶k og slip blokke for at bygge smarthome scener</p>
                </div>

                <div class="block-editor-layout">
                    <!-- Block Palette -->
                    <div class="block-palette">
                        <h3 class="palette-title">üì¶ Blokke</h3>
                        
                        <div class="block-category">
                            <h4 class="category-title">üéØ Triggers</h4>
                            
                            <!-- Bev√¶gelsessensorer -->
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="motion" data-sensor-id="bevaegelsessensor-entre">
                                <span class="block-icon">üì°</span>
                                <div>
                                    <div class="block-name">Bev√¶gelse Entre</div>
                                    <div class="block-description">Bev√¶gelsessensor Entre</div>
                                </div>
                            </div>
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="motion" data-sensor-id="bevaegelsessensor-stue">
                                <span class="block-icon">üì°</span>
                                <div>
                                    <div class="block-name">Bev√¶gelse Stue</div>
                                    <div class="block-description">Bev√¶gelsessensor Stue</div>
                                </div>
                            </div>
                            
                            <!-- D√∏r/Vindue sensorer -->
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="door" data-sensor-id="vindue-sovevaerelse">
                                <span class="block-icon">ü™ü</span>
                                <div>
                                    <div class="block-name">Vindue Sovev√¶relse</div>
                                    <div class="block-description">Vindue √•bnet/lukket</div>
                                </div>
                            </div>
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="door" data-sensor-id="vindue-stue">
                                <span class="block-icon">ü™ü</span>
                                <div>
                                    <div class="block-name">Vindue Stue</div>
                                    <div class="block-description">Vindue √•bnet/lukket</div>
                                </div>
                            </div>
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="door" data-sensor-id="doerlaas">
                                <span class="block-icon">üîí</span>
                                <div>
                                    <div class="block-name">D√∏rl√•s</div>
                                    <div class="block-description">D√∏r l√•st/ul√•st</div>
                                </div>
                            </div>
                            
                            <!-- Fugtighedsensor -->
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="humidity" data-sensor-id="badevaerelse-fugtmaaler">
                                <span class="block-icon">üíß</span>
                                <div>
                                    <div class="block-name">Fugtighed</div>
                                    <div class="block-description">Badev√¶relse fugtniveau</div>
                                </div>
                            </div>
                            
                            <!-- Vandl√¶kagesensor -->
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="humidity" data-sensor-id="koekken-vandlaekage">
                                <span class="block-icon">üíß</span>
                                <div>
                                    <div class="block-name">Vandl√¶kage</div>
                                    <div class="block-description">K√∏kken vandl√¶kage</div>
                                </div>
                            </div>
                            
                            <!-- R√∏galarm -->
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="smoke" data-sensor-id="koekken-roegalarm">
                                <span class="block-icon">üö®</span>
                                <div>
                                    <div class="block-name">R√∏galarm</div>
                                    <div class="block-description">K√∏kken r√∏galarm</div>
                                </div>
                            </div>
                            
                            <!-- Temperatur -->
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="temperature" data-sensor-id="aktuator-radiator">
                                <span class="block-icon">üå°Ô∏è</span>
                                <div>
                                    <div class="block-name">Temperatur</div>
                                    <div class="block-description">Radiator temperatur</div>
                                </div>
                            </div>
                            
                            <!-- Sovev√¶relse Temperatur -->
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="temperature" data-sensor-id="sovevaerelse-temperatur">
                                <span class="block-icon">üå°Ô∏è</span>
                                <div>
                                    <div class="block-name">Sovev√¶relse Temp</div>
                                    <div class="block-description">Sovev√¶relse temperatur</div>
                                </div>
                            </div>
                            
                            <!-- Vejrstation -->
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="weather" data-sensor-id="udvendig-vejrstation">
                                <span class="block-icon">üå§Ô∏è</span>
                                <div>
                                    <div class="block-name">Vejr</div>
                                    <div class="block-description">Udvendig vejrstation</div>
                                </div>
                            </div>
                            
                            <!-- Tid -->
                            <div class="block-item" draggable="true" data-block-type="trigger" data-block-subtype="time">
                                <span class="block-icon">‚è∞</span>
                                <div>
                                    <div class="block-name">Tid</div>
                                    <div class="block-description">Kl. 18:00, hver dag</div>
                                </div>
                            </div>
                        </div>


                        <div class="block-category">
                            <h4 class="category-title">‚ö° Handlinger</h4>
                            
                            <!-- Lamper -->
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="light" data-actuator-id="stue-lampe">
                                <span class="block-icon">üí°</span>
                                <div>
                                    <div class="block-name">Stue Lampe</div>
                                    <div class="block-description">T√¶nd/sluk stue lampe</div>
                                </div>
                            </div>
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="light" data-actuator-id="badevaerelse-lampe">
                                <span class="block-icon">üí°</span>
                                <div>
                                    <div class="block-name">Badev√¶relses Lampe</div>
                                    <div class="block-description">T√¶nd/sluk badev√¶relses lampe</div>
                                </div>
                            </div>
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="light" data-actuator-id="sovevaerelse-lampe">
                                <span class="block-icon">üí°</span>
                                <div>
                                    <div class="block-name">Sovev√¶relse Lampe</div>
                                    <div class="block-description">T√¶nd/sluk sovev√¶relses lampe</div>
                                </div>
                            </div>
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="light" data-actuator-id="koekken-lampe">
                                <span class="block-icon">üí°</span>
                                <div>
                                    <div class="block-name">K√∏kken Lampe</div>
                                    <div class="block-description">T√¶nd/sluk k√∏kken lampe</div>
                                </div>
                            </div>
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="light" data-actuator-id="spisestue-lampe">
                                <span class="block-icon">üí°</span>
                                <div>
                                    <div class="block-name">Spisestue Lampe</div>
                                    <div class="block-description">T√¶nd/sluk spisestue lampe</div>
                                </div>
                            </div>
                            
                            <!-- Altanlys -->
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="light" data-actuator-id="altan-lys">
                                <span class="block-icon">üí°</span>
                                <div>
                                    <div class="block-name">Altanlys</div>
                                    <div class="block-description">T√¶nd/sluk altanlys</div>
                                </div>
                            </div>
                            
                            <!-- D√¶mper -->
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="dimmer">
                                <span class="block-icon">üîÜ</span>
                                <div>
                                    <div class="block-name">D√¶mper</div>
                                    <div class="block-description">Just√©r lysstyrke</div>
                                </div>
                            </div>
                            
                            <!-- Ventilator -->
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="fan" data-actuator-id="badevaerelse-ventilator">
                                <span class="block-icon">üåÄ</span>
                                <div>
                                    <div class="block-name">Ventilator</div>
                                    <div class="block-description">Badev√¶relse ventilator</div>
                                </div>
                            </div>
                            
                            <!-- Notifikation -->
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="notification">
                                <span class="block-icon">üîî</span>
                                <div>
                                    <div class="block-name">Notifikation</div>
                                    <div class="block-description">Send besked</div>
                                </div>
                            </div>
                            
                            <!-- Smart Stikkontakter -->
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="socket" data-actuator-id="stue-stikkontakt">
                                <span class="block-icon">‚ö°</span>
                                <div>
                                    <div class="block-name">Stue Stikkontakt</div>
                                    <div class="block-description">T√¶nd/sluk stue stikkontakt</div>
                                </div>
                            </div>
                            
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="socket" data-actuator-id="koekken-stikkontakt">
                                <span class="block-icon">‚ö°</span>
                                <div>
                                    <div class="block-name">K√∏kken Stikkontakt</div>
                                    <div class="block-description">T√¶nd/sluk k√∏kken stikkontakt</div>
                                </div>
                            </div>
                            
                            <div class="block-item" draggable="true" data-block-type="action" data-block-subtype="socket" data-actuator-id="sovevaerelse-stikkontakt">
                                <span class="block-icon">‚ö°</span>
                                <div>
                                    <div class="block-name">Sovev√¶relse Stikkontakt</div>
                                    <div class="block-description">T√¶nd/sluk sovev√¶relse stikkontakt</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Scene Editor with Zones -->
                    <div class="canvas-area">
                        <div class="canvas-header">
                            <h3 class="canvas-title">üé® Scene Editor</h3>
                            <div class="canvas-actions">
                                <input type="text" id="scene-name" placeholder="Scene navn..." style="margin-right: 10px; padding: 8px; border-radius: 4px; border: 1px solid #4a5568; background: #2d3748; color: white;">
                                <button class="action-btn" onclick="window.appManager.saveScene()">üíæ Gem</button>
                                <button class="action-btn" onclick="window.appManager.testScene()">‚ñ∂Ô∏è Test</button>
                                <button class="action-btn" onclick="window.appManager.clearScene()">üóëÔ∏è Ryd</button>
                                <button class="action-btn" onclick="window.appManager.showSavedRules()">üìã Mine Regler</button>
                            </div>
                        </div>
                        <div class="zones-container">
                            <!-- Triggers & Betingelser Zone -->
                            <div class="zone triggers-zone">
                                <div class="zone-header">
                                    <span class="zone-icon">üéØ</span>
                                    <div>
                                        <div class="zone-title">Triggers & Betingelser</div>
                                        <div class="zone-subtitle">Alle skal v√¶re opfyldt (implicit AND)</div>
                                    </div>
                                </div>
                                <div class="zone-content">
                                    <div class="trigger-slots">
                                        <div class="trigger-slot" data-slot="1">
                                            <div class="slot-placeholder">
                                                <div class="slot-icon">üéØ</div>
                                                <div class="slot-text">Tr√¶k trigger her</div>
                                            </div>
                                        </div>
                                        <div class="trigger-slot" data-slot="2">
                                            <div class="slot-placeholder">
                                                <div class="slot-icon">üéØ</div>
                                                <div class="slot-text">Tr√¶k trigger her</div>
                                            </div>
                                        </div>
                                        <div class="trigger-slot" data-slot="3">
                                            <div class="slot-placeholder">
                                                <div class="slot-icon">üéØ</div>
                                                <div class="slot-text">Tr√¶k trigger her</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Flow Arrow -->
                            <div class="flow-arrow">
                                <div class="arrow-icon">‚û°Ô∏è</div>
                                <div class="arrow-text">Hvis alle opfyldt</div>
                            </div>

                            <!-- Actions Zone -->
                            <div class="zone actions-zone">
                                <div class="zone-header">
                                    <span class="zone-icon">‚ö°</span>
                                    <div>
                                        <div class="zone-title">Handlinger</div>
                                        <div class="zone-subtitle">Alle udf√∏res samtidigt</div>
                                    </div>
                                </div>
                                <div class="zone-content">
                                    <div class="action-slots">
                                        <div class="action-slot" data-slot="1">
                                            <div class="slot-placeholder">
                                                <div class="slot-icon">‚ö°</div>
                                                <div class="slot-text">Tr√¶k handling her</div>
                                            </div>
                                        </div>
                                        <div class="action-slot" data-slot="2">
                                            <div class="slot-placeholder">
                                                <div class="slot-icon">‚ö°</div>
                                                <div class="slot-text">Tr√¶k handling her</div>
                                            </div>
                                        </div>
                                        <div class="action-slot" data-slot="3">
                                            <div class="slot-placeholder">
                                                <div class="slot-icon">‚ö°</div>
                                                <div class="slot-text">Tr√¶k handling her</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Properties Panel -->
                    <div class="properties-panel">
                        <h3 class="properties-title">‚öôÔ∏è Egenskaber</h3>
                        
                        <div class="property-group">
                            <label class="property-label">Scene Navn</label>
                            <input type="text" class="property-input" id="scene-name" placeholder="Min Scene" value="Aften Scene">
                        </div>

                        <div class="property-group">
                            <label class="property-label">Beskrivelse</label>
                            <input type="text" class="property-input" id="scene-description" placeholder="Beskriv scenen..." value="T√¶nd stue lampe n√•r der er bev√¶gelse om aftenen">
                        </div>

                        <div class="property-group">
                            <label class="property-label">Aktiveret</label>
                            <select class="property-select" id="scene-enabled">
                                <option>Ja</option>
                                <option>Nej</option>
                            </select>
                        </div>

                        <div class="property-group">
                            <label class="property-label">Valgt Blok</label>
                            <div class="selected-block-info" id="selected-block-info">
                                <div class="selected-block-name">Ingen blok valgt</div>
                                <div class="selected-block-type">Klik p√• en blok for at se indstillinger</div>
                            </div>
                        </div>

                        <!-- Dynamic Block Properties -->
                        <div class="property-group" id="block-properties">
                            <label class="property-label">Blok Indstillinger</label>
                            <div id="block-properties-content">
                                <div style="text-align: center; color: #a0aec0; padding: 20px;">
                                    V√¶lg en blok for at se indstillinger
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Saved Rules Modal -->
            <div id="saved-rules-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>üìã Mine Gemte Regler</h2>
                        <button class="modal-close" onclick="window.appManager.closeSavedRulesModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div id="saved-rules-list">
                            <!-- Regler vil blive indl√¶st her -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="window.appManager.closeSavedRulesModal()">Luk</button>
                    </div>
                </div>
            </div>

            <!-- Advanced Tab -->
            <div id="advanced-tab" class="tab-content">
                <div class="advanced-container">
                    <div class="advanced-header">
                        <h1>‚ö° Advanced Mode</h1>
                        <p>Avancerede funktioner og eksperimentelle features</p>
                    </div>
                    
                    <div class="advanced-content">

                        <div class="advanced-section">
                            <h2>üß™ Experimental Features</h2>
                            <div class="feature-grid">
                                <div class="feature-card">
                                    <h3>üîÆ AI Assistant</h3>
                                    <p>Intelligent hj√¶lper til smarthome optimering</p>
                                    <button class="btn btn-primary" onclick="window.appManager.toggleAIAssistant()">Aktiver</button>
                                </div>
                                <div class="feature-card">
                                    <h3>üîê Security Scanner</h3>
                                    <p>Automatisk sikkerhedsgennemgang af systemet</p>
                                    <button class="btn btn-primary" onclick="window.appManager.runSecurityScan()">Start Scan</button>
                                </div>
                            </div>
                        </div>

                        <div class="advanced-section">
                            <h2>üõ†Ô∏è Developer Tools</h2>
                            <div class="tools-grid">
                                <div class="tool-card">
                                    <h3>Console Access</h3>
                                    <p>Direkte adgang til browser console</p>
                                    <button class="btn btn-secondary" onclick="window.appManager.openConsole()">√Öbn Console</button>
                                </div>
                                <div class="tool-card">
                                    <h3>Data Export</h3>
                                    <p>Eksporter alle applikationsdata</p>
                                    <button class="btn btn-secondary" onclick="window.appManager.exportData()">Eksporter</button>
                                </div>
                                <div class="tool-card">
                                    <h3>Cache Clear</h3>
                                    <p>Ryd browser cache og lokale data</p>
                                    <button class="btn btn-secondary" onclick="window.appManager.clearCache()">Ryd Cache</button>
                                </div>
                                <div class="tool-card">
                                    <h3>System Reset</h3>
                                    <p>Nulstil hele systemet til standard</p>
                                    <button class="btn btn-danger" onclick="window.appManager.systemReset()">Nulstil System</button>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>

            <!-- Indstillinger Tab -->
            <div id="settings-tab" class="tab-content">
                <div class="settings-layout">
                    <div class="settings-header">
                        <h2>Indstillinger</h2>
                    </div>
                    
                    <div class="settings-grid">
                        <!-- Tema Sektion -->
                        <div class="settings-column">
                            <div class="settings-group">
                                <h3>üé® Tema</h3>
                                <p>V√¶lg dit foretrukne tema for applikationen</p>
                                
                                <div class="theme-selector">
                                    <div class="theme-option active" data-theme="default">
                                        <div class="theme-preview theme-blue"></div>
                                        <h4>Moderne Bl√•</h4>
                                        <p>Elegant og futuristisk design</p>
                                    </div>
                                    
                                    <div class="theme-option" data-theme="crimson-gold">
                                        <div class="theme-preview theme-crimson-gold"></div>
                                        <h4>Crimson & Guld</h4>
                                        <p>Elegant sort og crimson med guld accent</p>
                                    </div>
                                    
                                    <div class="theme-option" data-theme="warm-green">
                                        <div class="theme-preview theme-warm-green"></div>
                                        <h4>Varm Gr√∏n</h4>
                                        <p>Behageligt og varmt design</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Brugergr√¶nseflade Sektion -->
                        <div class="settings-column">
                            <div class="settings-group">
                                <h3>üñ•Ô∏è Brugergr√¶nseflade</h3>
                                <p>Tilpas applikationens udseende og adf√¶rd</p>
                                
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <h4>Advanced Mode</h4>
                                        <p>Aktiverer avancerede funktioner og en ekstra fane i headeren</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="advanced-mode" onchange="window.appManager.toggleAdvancedMode()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <h4>Kompakt Visning</h4>
                                        <p>Reducerer mellemrum og g√∏r indholdet mere kompakt</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="compact-view" onchange="window.appManager.toggleCompactView()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>

                                <div class="setting-item">
                                    <div class="setting-info">
                                        <h4>H√∏j Kontrast</h4>
                                        <p>√òger kontrasten for bedre l√¶sbarhed</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="high-contrast" onchange="window.appManager.toggleHighContrast()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>

                                <div class="setting-item">
                                    <div class="setting-info">
                                        <h4>St√∏rre Skrift</h4>
                                        <p>√òger skriftst√∏rrelsen for bedre l√¶sbarhed</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="large-text" onchange="window.appManager.toggleLargeText()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>

                                <div class="setting-item">
                                    <div class="setting-info">
                                        <h4>Optimer for B√¶rbare PC'er</h4>
                                        <p>Aktiverer automatisk performance optimering for langsommere enheder - reducerer animationer og forbedrer FPS</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="laptop-optimization" onchange="window.appManager.toggleLaptopOptimization()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>


                            </div>
                        </div>

                        <!-- Notifikationer Sektion -->
                        <div class="settings-column">
                            <div class="settings-group">
                                <h3>üîî Notifikationer</h3>
                                <p>Administrer notifikationer og beskeder</p>
                                
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <h4>Lydnotifikationer</h4>
                                        <p>Afspil lyd n√•r der kommer notifikationer</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="sound-notifications" onchange="window.appManager.toggleSoundNotifications()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>

                                <div class="setting-item">
                                    <div class="setting-info">
                                        <h4>Desktop Notifikationer</h4>
                                        <p>Vis notifikationer uden for browseren</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="desktop-notifications" onchange="window.appManager.toggleDesktopNotifications()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Data & Sikkerhed Sektion -->
                        <div class="settings-column">
                            <div class="settings-group">
                                <h3>üõ°Ô∏è Data & Sikkerhed</h3>
                                <p>Administrer data og sikkerhedsindstillinger</p>
                                
                                <div class="setting-item">
                                    <div class="setting-info">
                                        <h4>Auto-logout</h4>
                                        <p>Log automatisk ud efter inaktivitet</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="auto-logout" onchange="window.appManager.toggleAutoLogout()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>

                                <div class="setting-item">
                                    <div class="setting-info">
                                        <h4>Gem Indstillinger Lokalt</h4>
                                        <p>Gem indstillinger i browserens lokale lager</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="save-settings" checked onchange="window.appManager.toggleSaveSettings()">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>

                                <div class="setting-actions">
                                    <button class="btn btn-secondary" onclick="window.appManager.resetSettings()">Nulstil Indstillinger</button>
                                    <button class="btn btn-danger" onclick="window.appManager.clearAllData()">Slet Alle Data</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Firebase Configuration -->
    <script src="firebase-config.js"></script>
    
    <!-- App Script -->
    <!-- Weather Station Popup -->
    <div id="weather-popup" class="weather-popup">
        <div class="weather-popup-content">
            <div class="weather-popup-header">
                <h3>Udvendig Vejrstation</h3>
                <button class="weather-popup-close">&times;</button>
            </div>
            <div class="weather-popup-body">
                <div class="weather-setting">
                    <label for="outdoor-temp-input">Udvendig Temperatur</label>
                    <div class="weather-input-group">
                        <input type="range" id="outdoor-temp-input" min="-10" max="40" value="15" class="weather-slider">
                        <span class="weather-input-value" id="outdoor-temp-display">15¬∞C</span>
                    </div>
                </div>
                <div class="weather-setting">
                    <label for="outdoor-light-input">Udvendig Lysstyrke</label>
                    <div class="weather-input-group">
                        <input type="range" id="outdoor-light-input" min="0" max="100" value="0" class="weather-slider">
                        <span class="weather-input-value" id="outdoor-light-display">M√∏rkt</span>
                    </div>
                </div>
            </div>
            <div class="weather-popup-footer">
                <button class="weather-save-btn">Gem Indstillinger</button>
            </div>
        </div>
    </div>
    
    <!-- Fugtm√•ler Popup -->
    <div id="humidity-popup" class="humidity-popup">
        <div class="humidity-popup-content">
            <div class="humidity-popup-header">
                <h3>Badev√¶relse Fugtm√•ler</h3>
                <button class="humidity-popup-close">&times;</button>
            </div>
            <div class="humidity-popup-body">
                <div class="humidity-setting">
                    <label for="humidity-slider">Fugtniveau: <span id="humidity-value">45</span>%</label>
                    <div class="humidity-input-group">
                        <input type="range" id="humidity-slider" class="humidity-slider" min="30" max="80" value="45">
                    </div>
                </div>
            </div>
            <div class="humidity-popup-footer">
                <button class="humidity-save-btn">Gem Indstillinger</button>
            </div>
        </div>
    </div>
    
    <!-- Temperatur Popup -->
    <div id="temperature-popup" class="temperature-popup">
        <div class="temperature-popup-content">
            <div class="temperature-popup-header">
                <h3>Sovev√¶relse Temperatur</h3>
                <button class="temperature-popup-close">&times;</button>
            </div>
            <div class="temperature-popup-body">
                <div class="temperature-setting">
                    <label for="temperature-slider">Temperatur: <span id="temperature-value">21</span>¬∞C</label>
                    <div class="temperature-input-group">
                        <input type="range" id="temperature-slider" class="temperature-slider" min="15" max="30" value="21">
                    </div>
                </div>
            </div>
            <div class="temperature-popup-footer">
                <button class="temperature-save-btn">Gem Indstillinger</button>
            </div>
        </div>
    </div>

    <script src="js/app.js?v=202412201300"></script>
    
    <!-- Cache busting confirmation -->
    <script>
        console.log('üöÄ NEW VERSION LOADED: 202412201300 - Teacher Dashboard Login added!');
    </script>
    
    <!-- Debug Console Helper -->
    <script>
        // Add helpful debug functions to console
        window.debugFirebase = {
            clearData: () => {
                if (window.FirebaseConfig && window.FirebaseConfig.clearFirestoreData) {
                    window.FirebaseConfig.clearFirestoreData().then(() => {
                        console.log('üîÑ Refresh the page to complete the cleanup');
                        if (confirm('Data cleared! Refresh the page now to complete the setup?')) {
                            window.location.reload();
                        }
                    });
                } else {
                    console.log('‚ö†Ô∏è Firebase not initialized yet');
                }
            },
            status: () => {
                if (window.FirebaseConfig && window.FirebaseConfig.isFirebaseReady) {
                    const isReady = window.FirebaseConfig.isFirebaseReady();
                    console.log('Firebase Status:', isReady ? '‚úÖ Ready' : '‚ùå Not Ready');
                    return isReady;
                } else {
                    console.log('‚ö†Ô∏è Firebase not initialized yet');
                    return false;
                }
            },
            refresh: () => {
                console.log('üîÑ Refreshing page...');
                window.location.reload();
            },
            createTestProgress: async () => {
                if (window.FirebaseConfig && window.FirebaseConfig.getFirestore) {
                    try {
                        const db = window.FirebaseConfig.getFirestore();
                        const auth = window.FirebaseConfig.getAuth();
                        
                        if (auth.currentUser) {
                            const testData = {
                                userId: auth.currentUser.uid,
                                subtopicId: 'test-modul',
                                completedAt: new Date().toISOString(),
                                timestamp: Date.now()
                            };
                            
                            await db.collection('learning_progress').add(testData);
                            console.log('‚úÖ Test progress data created in Firebase!');
                        } else {
                            console.log('‚ùå No user logged in. Please log in first.');
                        }
                    } catch (error) {
                        console.error('‚ùå Error creating test data:', error);
                    }
                } else {
                    console.log('‚ùå Firebase not initialized');
                }
            },
            checkProgress: () => {
                const localProgress = JSON.parse(localStorage.getItem('learningProgress') || '[]');
                console.log('üìä Current progress status:');
                console.log('  - User logged in:', !!window.appManager?.currentUser);
                console.log('  - Completed modules:', window.appManager?.completedModules || []);
                console.log('  - localStorage progress:', localProgress);
                console.log('  - Progress percentage:', Math.round((window.appManager?.completedModules?.length || 0) / 37 * 100) + '%');
            }
        };
        
        console.log('üîß Debug functions available:');
        console.log('  - debugFirebase.clearData() - Clear Firestore data');
        console.log('  - debugFirebase.status() - Check Firebase status');
        console.log('  - debugFirebase.refresh() - Refresh the page');
        console.log('  - debugFirebase.createTestProgress() - Create test progress data');
        console.log('  - debugFirebase.checkProgress() - Check current progress status');
    </script>

    <!-- Advanced Mode Password Popup -->
    <div id="advanced-password-popup" class="password-popup">
        <div class="password-popup-content">
            <div class="password-popup-header">
                <h3>üîê Advanced Mode</h3>
                <p>Indtast koden for at aktivere avancerede funktioner</p>
            </div>
            <div class="password-popup-body">
                <div class="password-input-group">
                        <input type="password" id="advanced-password-input" placeholder="Indtast kode..." autocomplete="current-password" maxlength="20">
                    <button type="button" id="toggle-password-visibility" class="password-toggle">
                        <span class="password-icon">üëÅÔ∏è</span>
                    </button>
                </div>
            </div>
            <div class="password-popup-footer">
                <button type="button" id="cancel-password" class="btn btn-secondary">Annuller</button>
                <button type="button" id="submit-password" class="btn btn-primary">Aktiver</button>
            </div>
        </div>
    </div>

    <!-- Teacher Dashboard Password Popup -->

    <!-- D√¶mper Dialog Popup -->
    <div id="dimmer-dialog" class="dimmer-popup">
        <div class="dimmer-popup-content">
            <div class="dimmer-popup-header">
                <h3>üîÜ D√¶mper Indstillinger</h3>
                <button class="close-btn" onclick="window.appManager.closeDimmerDialog()">&times;</button>
            </div>
            <div class="dimmer-popup-body">
                <div class="dimmer-control">
                    <label>V√¶rdi (%):</label>
                    <input type="range" id="dimmer-slider" min="0" max="100" value="0" oninput="window.appManager.updateDimmerValue(this.value)">
                    <div class="dimmer-value-display">
                        <span id="dimmer-current-value">0</span>%
                    </div>
                </div>
                <div class="dimmer-presets">
                    <button class="btn btn-small" onclick="window.appManager.setDimmerValue(25)">25%</button>
                    <button class="btn btn-small" onclick="window.appManager.setDimmerValue(50)">50%</button>
                    <button class="btn btn-small" onclick="window.appManager.setDimmerValue(75)">75%</button>
                    <button class="btn btn-small" onclick="window.appManager.setDimmerValue(100)">100%</button>
                </div>
            </div>
            <div class="dimmer-popup-footer">
                <button class="btn btn-secondary" onclick="window.appManager.closeDimmerDialog()">Annuller</button>
                <button class="btn btn-primary" onclick="window.appManager.applyDimmerValue()">Anvend</button>
            </div>
        </div>
    </div>

    <!-- Sensor Status Popup -->
    <div id="sensor-status-popup" class="sensor-popup">
        <div class="sensor-popup-content">
            <div class="sensor-popup-header">
                <h3 id="sensor-popup-title">üì° Sensor Indstillinger</h3>
                <button class="close-btn" onclick="window.appManager.closeSensorStatusPopup()">&times;</button>
            </div>
            <div class="sensor-popup-body">
                <div class="sensor-info">
                    <div class="sensor-icon" id="sensor-popup-icon">üì°</div>
                    <div class="sensor-details">
                        <h4 id="sensor-popup-name">Sensor Navn</h4>
                        <p id="sensor-popup-type">Sensor Type</p>
                    </div>
                </div>
                
                <div class="sensor-status-controls" id="sensor-status-controls">
                    <!-- Dynamisk indhold baseret p√• sensor type -->
                </div>
            </div>
            <div class="sensor-popup-footer">
                <button class="btn btn-secondary" onclick="window.appManager.closeSensorStatusPopup()">Annuller</button>
                <button class="btn btn-primary" onclick="window.appManager.applySensorStatus()">Anvend</button>
            </div>
        </div>
    </div>

    <!-- Join Class Popup -->

    
</body>
</html>
